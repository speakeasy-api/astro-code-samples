# Astro Docs w/ Speakeasy Code Samples

This is an Astro project that demonstrates how a developer can use a framework like Astro alongside Speakeasy's `Code Samples` API to make awesome docs.

## Why though?

Using a method like this gives you a few awesome benefits:

- **Fresh Samples.** Each time your site builds, it fetches new code samples from Speakeasy's API. In other words - if your API's spec changes, your doc's code samples will update, too! ðŸ¤¯
- **Build-Time Validation.** If you try to reference a code sample that doesn't exist, the site won't build. Just one more edge case to avoid.

## Highlights

### The Content Loader

Check out [content.config.ts](/src/content.config.ts). This is where most of the magic happens. The loader uses Speakeasy's `Code Samples SDK` to auto-generate code samples from Swagger's example OpenAPI spec (`petstore`). It then parses the result and makes a content collection so code samples are a breeze to fetch in Astro components.

### The `CodeSample` Component

The `CodeSample` component accepts an `id` prop - which maps to the label of the Code Sample that was generated by Speakeasy. If a sample with that ID exists, it renders that sample. If not, the component will throw an error, and the site will fail to build!

## Testing the Project

All commands are run from the root of the project, from a terminal:

| Command                    | Action                                           |
| :------------------------- | :----------------------------------------------- |
| `pnpm install`             | Installs dependencies                            |
| `pnpm run dev`             | Starts local dev server at `localhost:4321`      |
| `pnpm run build`           | Build your production site to `./dist/`          |
| `pnpm run preview`         | Preview your build locally, before deploying     |
| `pnpm run astro ...`       | Run CLI commands like `astro add`, `astro check` |
| `pnpm run astro -- --help` | Get help using the Astro CLI                     |
